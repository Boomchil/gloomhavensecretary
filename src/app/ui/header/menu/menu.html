<a #button class="button active-outline">
  â˜°
</a>
<div #dialog [ngSwitch]="active">
  <div *ngSwitchCase="SubMenu.main" class="menu-container main">
    <div class="line">
      <div class="state">
        <a [ngClass]="{'disabled' : !gameManager.stateManager.hasUndo()}"
          (click)="gameManager.stateManager.undo()">{{'state.undo'  | ghsLabel}} </a>
        <a [ngClass]="{'disabled' :!gameManager.stateManager.hasRedo()}"
          (click)="gameManager.stateManager.redo()">{{'state.redo'  | ghsLabel}}</a>
      </div>
    </div>

    <div class="line separator">
      <a (click)="active = SubMenu.edition">{{'edition'  | ghsLabel}}</a>
    </div>

    <div class="line separator">
      <a (click)="active = SubMenu.scenario">{{'scenario'  | ghsLabel}}</a>
    </div>
    <div class="line disabled">
      <a (click)="active = SubMenu.section">{{'section'  | ghsLabel}}</a>
    </div>

    <div class="line separator" [ngClass]="{'disabled' : hasAllMonster()}">
      <a (click)="active = SubMenu.monster_add">{{'monster.add'  | ghsLabel}}</a>
    </div>
    <div class="line" [ngClass]="{'disabled' : monsters().length == 0}">
      <a (click)="active = SubMenu.monster_remove">{{'monster.remove'  | ghsLabel}}</a>
    </div>

    <div class="line separator" [ngClass]="{'disabled' : hasAllCharacter()}">
      <a (click)="active = SubMenu.character_add">{{'character.add'  | ghsLabel}}</a>
    </div>
    <div class="line" [ngClass]="{'disabled' : characters().length == 0}">
      <a (click)="active = SubMenu.character_remove">{{'character.remove'  | ghsLabel}}</a>
    </div>
    
    <div class="line separator">
      <a (click)="active = SubMenu.settings">{{'settings'  | ghsLabel}}</a>
    </div>

    <div class="line separator">
      <a (click)="active = SubMenu.about">{{'about'  | ghsLabel}}</a>
    </div>
  </div>

  <ghs-edition-menu *ngSwitchCase="SubMenu.edition"></ghs-edition-menu>

  <div *ngSwitchCase="SubMenu.scenario" class="menu-container scenario">
    <ng-container *ngIf="gameManager.game.edition">
      <div class="line"
        *ngFor="let scenarioData of gameManager.scenarioData | ghsEditionFilter:gameManager.game.edition">
        <a (click)="setScenario(scenarioData);">
          #{{scenarioData.index}} {{'data.scenario.' + scenarioData.name | ghsLabel}}
        </a>
      </div>
    </ng-container>
    <ng-container *ngIf="!gameManager.game.edition">
      <ng-container *ngFor="let edition of gameManager.editions; let index = index;">
        <div class="line title disabled" [ngClass]="{'separator' : index > 0}">
          <label>{{'data.edition.' + edition  | ghsLabel}}</label>
        </div>
        <div class="line" *ngFor="let scenarioData of gameManager.scenarioData | ghsEditionFilter:edition">
          <a (click)="setScenario(scenarioData);">
            #{{scenarioData.index}} {{'data.scenario.' + scenarioData.name | ghsLabel}}
          </a>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <div *ngSwitchCase="SubMenu.character_add" class="menu-container character-add">
    <ng-container *ngIf="gameManager.game.edition">
      <div class="line"
        *ngFor="let characterData of gameManager.charactersData | ghsEditionFilter:gameManager.game.edition | ghsSort"
        [ngClass]="{'disabled' : hasCharacter(characterData)}">
        <a (click)="addCharacter(characterData);">
          {{'data.character.' + characterData.name | ghsLabel}}
        </a>
      </div>
    </ng-container>
    <ng-container *ngIf="!gameManager.game.edition">
      <ng-container *ngFor="let edition of gameManager.editions; let index = index;">
        <div class="line title disabled" [ngClass]="{'separator' : index > 0}">
          <label>{{'data.edition.' + edition  | ghsLabel}}</label>
        </div>
        <div class="line" *ngFor="let characterData of gameManager.charactersData | ghsEditionFilter:edition | ghsSort"
          [ngClass]="{'disabled' : hasCharacter(characterData)}">
          <a (click)="addCharacter(characterData);">
            {{'data.character.' + characterData.name | ghsLabel}}
          </a>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <div *ngSwitchCase="SubMenu.character_remove" class="menu-container character-remove">
    <div class="line">
      <a (click)="removeAllCharacters()">
        &lt;{{'character.removeAll'  | ghsLabel}}&gt;
      </a>
    </div>
    <div class="line" *ngFor="let character of characters() | ghsSort">
      <a (click)="removeCharacter(character);">
        <span *ngIf="character.title">{{character.title}} (</span>
        {{'data.character.' + character.name | ghsLabel}}
        <span *ngIf="character.title">)</span>
      </a>
    </div>
  </div>

  <div *ngSwitchCase="SubMenu.monster_add" class="menu-container monster-add">
    <ng-container *ngIf="gameManager.game.edition">
      <div class="line" *ngFor="let monsterData of gameManager.monstersData | ghsEditionFilter:gameManager.game.edition | ghsSort"
        [ngClass]="{'disabled' : hasMonster(monsterData)}">
        <a (click)="addMonster(monsterData);">
          {{'data.monster.' + monsterData.name | ghsLabel}}
        </a>
      </div>
    </ng-container>
    <ng-container *ngIf="!gameManager.game.edition">
      <ng-container *ngFor="let edition of gameManager.editions; let index = index;">
        <div class="line title disabled" [ngClass]="{'separator' : index > 0}">
          <label>{{'data.edition.' + edition  | ghsLabel}}</label>
        </div>
        <div class="line" *ngFor="let monsterData of gameManager.monstersData | ghsEditionFilter:edition | ghsSort"
          [ngClass]="{'disabled' : hasMonster(monsterData)}">
          <a (click)="addMonster(monsterData);">
            {{'data.monster.' + monsterData.name | ghsLabel}}
          </a>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <div *ngSwitchCase="SubMenu.monster_remove" class="menu-container monster-remove">
    <div class="line">
      <a (click)="removeAllMonsters()">
        &lt;{{'monster.removeAll'  | ghsLabel}}&gt;
      </a>
    </div>
    <div class="line" *ngFor="let monster of monsters() | ghsSort">
      <a (click)="removeMonster(monster);">
        {{'data.monster.' + monster.name | ghsLabel}}
      </a>
    </div>
  </div>

  <ghs-settings-menu *ngSwitchCase="SubMenu.settings" [setDialogPosition]="setDialogPositionFunc"></ghs-settings-menu>

  <div *ngSwitchCase="SubMenu.about" class="menu-container about">
    <div class="line">
      <p>Gloomhaven and all related properties, images and text are owned by <a href="https://cephalofair.com"
          target="_blank">Cephalofair Games.</a></p>
    </div>
    <div class="line">
      <a href="https://github.com/Lurkars/gloomhavensecretary" target="_blank">Source Code</a>
    </div>
  </div>
</div>
